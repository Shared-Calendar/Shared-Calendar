create table USER_TB (
    id int generated by default as identity,
    user_id varchar(45) not null,
    password text  not null,
    email varchar(45) not null,
    invite_url text not null,
    activate tinyint not null,
    try_count int not null,
    created_at timestamp not null default current_timestamp,
    updated_at timestamp not null default current_timestamp on update current_timestamp,
    password_date timestamp not null default current_timestamp,
    primary key (id)
);

create table NOTIFICATION_TB (
    id int generated by default as identity,
    user_id int not null,
    target_user_id int not null,
    shared_schedule_id int,
    notification_type varchar(10) not null,
    created_at timestamp not null default current_timestamp,
    updated_at timestamp not null default current_timestamp on update current_timestamp,
    primary key (id)
);

create table SHARED_SCHEDULE_TB(
    id int generated by default as identity,
    user_id int not null,
    connectee_id int not null,
    content text not null,
    date timestamp null,
    activate tinyint not null,
    created_at timestamp not null default current_timestamp,
    updated_at timestamp not null default current_timestamp on update current_timestamp,
    primary key (id)
);

create table CONNECTOR_TB (
    id int generated by default as identity,
    connector_id int not null,
    connectee_id int not null,
    last_visited_at timestamp not null,
    activate tinyint not null,
    created_at timestamp not null default current_timestamp,
    updated_at timestamp not null default current_timestamp,
    primary key (id)
);

alter table NOTIFICATION_TB add foreign key (user_id) references USER_TB(id);
alter table NOTIFICATION_TB add foreign key (target_user_id) references USER_TB(id);
alter table NOTIFICATION_TB add foreign key (shared_schedule_id) references SHARED_SCHEDULE_TB(id);
alter table SHARED_SCHEDULE_TB add foreign key (user_id) references USER_TB(id);
alter table SHARED_SCHEDULE_TB add foreign key (connectee_id) references USER_TB(id);
alter table CONNECTOR_TB add foreign key (connector_id) references USER_TB(id);
alter table CONNECTOR_TB add foreign key (connectee_id) references USER_TB(id);