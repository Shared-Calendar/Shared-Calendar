create table users (
    id int generated by default as identity,
    user_id varchar(45) not null,
    password text  not null,
    email varchar(45) not null,
    invite_url text not null,
    activate tinyint not null,
    created_at timestamp not null default current_timestamp,
    updated_at timestamp not null default current_timestamp on update current_timestamp,
    login_count int not null,
    primary key (id)
);

create table notification (
    id int generated by default as identity,
    user_id int not null,
    target_user_id int not null,
    shared_schedule_id int,
    notification_type varchar(10) not null,
    created_at timestamp not null default current_timestamp,
    updated_at timestamp not null default current_timestamp on update current_timestamp,
    primary key (id)
);

create table shared_schedule(
    id int generated by default as identity,
    user_id int not null,
    connectee_id int not null,
    content text not null,
    date timestamp null,
    activate tinyint not null,
    created_at timestamp not null default current_timestamp,
    updated_at timestamp not null default current_timestamp on update current_timestamp,
    primary key (id)
);

create table connector (
    id int generated by default as identity,
    connector_id int not null,
    connectee_id int not null,
    last_visited_at timestamp not null,
    activate tinyint not null,
    created_at timestamp not null default current_timestamp,
    updated_at timestamp not null default current_timestamp,
    primary key (id)
);

alter table notification add foreign key (user_id) references users(id);
alter table notification add foreign key (target_user_id) references users(id);
alter table notification add foreign key (shared_schedule_id) references shared_schedule(id);
alter table shared_schedule add foreign key (user_id) references users(id);
alter table shared_schedule add foreign key (connectee_id) references users(id);
alter table connector add foreign key (connector_id) references users(id);
alter table connector add foreign key (connectee_id) references users(id);